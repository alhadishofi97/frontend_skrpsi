import{ap as v,e as s,V as b,j as e,G as t,aq as x,ar as S,as as h,T as o,U as g,J as I,H as w}from"./index-CSQcVwAp.js";import{A as k,a as A,b as C}from"./AuthFooter-Cn6i_Mpw.js";import{A as D}from"./Alert-CnTLrU2R.js";const L="https://backendapi.my.id/api/users/login",H=()=>{const j=v(r=>r.breakpoints.down("md")),[c,p]=s.useState(""),[l,f]=s.useState(""),[u,a]=s.useState(null),d=b();s.useEffect(()=>{localStorage.getItem("token")&&d("/dashboard/default",{replace:!0})},[]);const y=async r=>{r.preventDefault(),a(null);const m={username:c,password:l};try{const i=await fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),n=await i.json();i.ok&&n.status==="success"?(localStorage.setItem("token",n.token),localStorage.setItem("menu-items",n.authority),localStorage.setItem("username",m.username),localStorage.setItem("name",n.name),localStorage.setItem("id_user",n.id_user),d("/dashboard/default",{replace:!0})):a(n.data||"Login failed, please try again.")}catch{a("An error occurred while logging in.")}};return e.jsx(k,{children:e.jsxs(t,{container:!0,direction:"column",justifyContent:"flex-end",sx:{minHeight:"100vh"},children:[e.jsx(t,{item:!0,xs:12,children:e.jsx(t,{container:!0,justifyContent:"center",alignItems:"center",sx:{minHeight:"calc(100vh - 68px)"},children:e.jsx(t,{item:!0,sx:{m:{xs:1,sm:3},mb:0},children:e.jsx(A,{children:e.jsxs(t,{container:!0,spacing:2,alignItems:"center",justifyContent:"center",children:[e.jsx(t,{item:!0,sx:{mb:3},children:e.jsx(x,{to:"#","aria-label":"logo",children:e.jsx(S,{})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(t,{container:!0,direction:{xs:"column-reverse",md:"row"},alignItems:"center",justifyContent:"center",children:e.jsx(t,{item:!0,children:e.jsxs(h,{alignItems:"center",justifyContent:"center",spacing:1,children:[e.jsx(o,{color:"secondary.main",gutterBottom:!0,variant:j?"h3":"h2",children:"Hi, Welcome Back"}),e.jsx(o,{variant:"caption",fontSize:"16px",textAlign:{xs:"center",md:"inherit"},children:"Enter your credentials to continue"})]})})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx("form",{onSubmit:y,children:e.jsxs(h,{spacing:2,children:[e.jsx(g,{label:"Username",variant:"outlined",fullWidth:!0,value:c,onChange:r=>p(r.target.value)}),e.jsx(g,{label:"Password",type:"password",variant:"outlined",fullWidth:!0,value:l,onChange:r=>f(r.target.value)}),u&&e.jsx(D,{severity:"error",children:u}),e.jsx(I,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",children:"Login"})]})})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(w,{})}),e.jsx(t,{item:!0,xs:12,children:e.jsx(t,{item:!0,container:!0,direction:"column",alignItems:"center",xs:12,children:e.jsx(o,{component:x,to:"/pages/register/register3",variant:"subtitle1",sx:{textDecoration:"none"},children:"Don't have an account?"})})})]})})})})}),e.jsx(t,{item:!0,xs:12,sx:{m:3,mt:1},children:e.jsx(C,{})})]})})};export{H as Login,H as default};
